<html>
  <head>
    <title>fds1638: Very Simple XML Parser</title>
  </head>
  <body style="margin:10;padding:10">
    <h1>Very Simple XML Parser</h1>
<p>
This repo hosts an XML parser that I will be working on. 
XML can be arbitrarity complex, so it can provide a series of successively more difficult programming challenges.
Hierarchical models (XML) to a relational models (tables) are different, so my goal will just be to do some special cases that will improve my skills.
<h3>Input:</h3>
  At this point the following XML can be parsed:<br>
  <textarea rows="15"    cols="55">
  
    <friends>
      <person>
        <name>Alice</name>
        <address>123 Main</address>
        <birthmonth>October</birthmonth>
        <industry>Consulting</industry>
      </person>
      <person>
        <name>Bob</name>
        <address>456 North</address>
        <industry>Marketing</industry>
      </person>
    </friends>
  </textarea>
<br><h3>Output:</h3>
The <code>sqlite3</code> output is a table called <i>person</i> in a database called <i>friends</i>:
  <table>
  <tr>
    <th>name</th>
    <th>address</th>
    <th>birthmonth</th>
    <th>industry</th>
  </tr>
  <tr>
    <td>Alice</td>
    <td>123 Main</td>
    <td>October</td>
    <td>Consulting</td>
  </tr>
  <tr>
    <td>Bob</td>
    <td>456 North</td>
    <td></td>
    <td>Marketing</industry></td>
  </tr>
</table>
<br><h3>Method:</h3>
<h4>Lexer</h4>
The lexer (<a href="https://github.com/fds1638/xmlparser/blob/c1fbf2af3c8bd7bd7834dfab1b5268735033956d/parser/xml_parse.py#L61">code here</a>) starts with string of XML (currently with no spaces, that's coming) like this:
  <textarea rows="4"    cols="155">
    
    <friends><person><name>Alice</name><address>123 Main</address><birthmonth>October</birthmonth><industry>Consulting</industry></person><person><name>Bob</name><address>456 North</address><industry>Marketing</industry></person></friends>
</textarea>
<br><br>The lexer outputs a list of tuples of tags and tag types. The three types are "ot" for an Opening Tag, "val" for Element Value, and "ct" for a Closing Tag:
  <textarea rows="5"    cols="155">
[('friends', 'ot'), ('person', 'ot'), ('name', 'ot'), ('Alice', 'val'), ('name', 'ct'), ('address', 'ot'), ('123 Main', 'val'), ('address', 'ct'), ('birthmonth', 'ot'), ('October', 'val'), ('birthmonth', 'ct'), ('industry', 'ot'), ('Consulting', 'val'), ('industry', 'ct'), ('person', 'ct'), ('person', 'ot'), ('name', 'ot'), ('Bob', 'val'), ('name', 'ct'), ('address', 'ot'), ('456 North', 'val'), ('address', 'ct'), ('industry', 'ot'), ('Marketing', 'val'), ('industry', 'ct'), ('person', 'ct'), ('friends', 'ct')]
</textarea>
<h4>Parser</h4>
<div>
The parser (<a href="https://github.com/fds1638/xmlparser/blob/c1fbf2af3c8bd7bd7834dfab1b5268735033956d/parser/xml_parse.py#L83">code here</a>) 
takes the output of the lexer as input and has the following logic:
</div>
<div>
  <ul>
    <li>Must start with an Opening Tag, the first Opening Tag is the database name</li>
    <li>Then must have another Opening Tag, which is the table name</li>
    <li>Opening Tag: can move to another Opening Tag or to an Element Value</li>
    <li>Element Value: can only get here from an Opening Tag, from here can only go to a Closing Tag</li>
    <li>Closing Tag: can move to another Closing Tag or to an Opening Tag</li>
  </ul>
</div>
<h4>Other</h4>
Other modules handle <a href="https://github.com/fds1638/xmlparser/blob/main/readers/reader.py">reading from XML</a>, 
<a href="https://github.com/fds1638/xmlparser/blob/main/writers/database.py">writing to the database</a>, 
and <a href="https://github.com/fds1638/xmlparser/blob/main/tests/test_xml_parse.py">testing</a>.
</p>
</body>
</html>
